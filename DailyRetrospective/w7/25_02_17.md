# 데일리 리뷰

날짜: 2025년 2월 17일
작성자: 최민제

# ✏️ Review

## Github Actions

- aws lambda를 계속해서 코드 수정 이후 직접 재배포하는 과정에 대한 번거로움을 줄이기 위해서 pr을 올리게 되면 람다를 자동 배포해서 테스트를 하는 github actions 코드를 추가하였다.
- 이후에 테스트의 번거로움이 확연히 줄어드는 것을 확인할 수 있었다.
- github actions는 트리거를 통해서 자동으로 특정 명령어가 실행될 수 있도록 설정하며, github가 제공하는 실행환경에서 yml파일을 통해 명령어들을 실행하게 된다.

## UDF에 대한 고민

- 게시글을 문장 단위로 분할하기 위해서, python의 외부 라이브러리인 kss를 사용하기로 하였다.
    
    이때, content라는 column의 모든 row에 대해서 split sentence 를 적용하고, 이후에 explode 하려고 한다.
    
    이렇게 되면, udf를 통해서 각 row에 user defined function을 적용해야 한다. 여기서 고민할 부분들이 생겼다.
    
    1. `pandas udf` vs `python udf`
        - pandas udf는 pyarrow로 벡터화 되어서 실행하기 때문에, row 단위로 한번에 하나씩 실행하는 python udf에 비해서 좀 더 오버헤드를 줄일 수 있게 된다.
        - 그러므로, `pandas udf`를 사용하도록 하였다.
    2. Spark는 여러 JVM을 통해서 따로 executor를 구성하고 분산처리를 진행하게 되는데, python 라이브러리를 사용하면 분산처리라는 이점이 Python Global Interpreter Lock으로 인해서 사라지는 것 아닐까?
        - spark를 통해서 분산처리를 하게 되고, pandas udf를 실행하게 되면, 각각의 jvm 내부에서 파이썬 프로세스가 생성되기 때문에 GIL 문제 없이 분산처리가 가능하다고 한다.

# 🤔 Retrospective

## ⚠️ Problem

- 하나의 아이디어에 매몰되어서 샛길을 생각하지 않았기에 지금의 아이디어가 잘못되었을 경우에 대한 대비가 적었다. 방향성을 잘 수정해서 문제가 해결될 수 있었고, 기술적인 부분에 좀 더 집중하기로 하였으나, 결과적으로 여러 방향성을 고려하지 못한 부분은 아쉽다.

## 🌟 Keep

- 코드를 작성할 때, 이렇게 코드를 작성하면 spark의 특성을 잘 살리는 코드인지 고민하면서 작성한 덕분에 헷갈리던 개념들을 좀 더 명확히 하고 새로운 지식을 얻을 수 있었다. 계속해서 코드의 효율성을 고민할 필요가 있다.

## 💡 Try
